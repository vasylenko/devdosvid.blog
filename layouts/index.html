{{- define "main" }}

{{- if .Content }}
<div class="page-content">{{ .Content }}</div>
{{- end }}

{{- $paginator := .Paginate (where site.RegularPages "Type" "in" site.Params.mainSections) }}
{{- if and .IsHome site.Params.homeInfoParams (eq $paginator.PageNumber 1) }}
{{- partial "home_info.html" . }}
{{- end }}

{{- $pages := $paginator.Pages }}
{{- if gt (len $pages) 0 }}
<section id="content">
{{- range $pages }}
{{- if eq .Type "posts" }}
{{- partial "summary.html" . }}
{{- end }}
{{- end }}
</section>
{{- end }}

{{- partial "recent-micros.html" . }}

{{- if gt $paginator.TotalPages 1 }}
<footer class="page-footer">
  <nav class="pagination">
    {{- if $paginator.HasPrev }}
    <a class="prev" href="{{ $paginator.Prev.URL | absURL }}">
      «&nbsp;{{ i18n "prev_page" }}&nbsp;
      {{- if (.Param "ShowPageNums") }}
      {{- sub $paginator.PageNumber 1 }}/{{ $paginator.TotalPages }}
      {{- end }}
    </a>
    {{- end }}
    {{- if $paginator.HasNext }}
    <a class="next" href="{{ $paginator.Next.URL | absURL }}">
      {{- i18n "next_page" }}&nbsp;
      {{- if (.Param "ShowPageNums") }}
      {{- add $paginator.PageNumber 1 }}/{{ $paginator.TotalPages }}
      {{- end }}
      &nbsp;»
    </a>
    {{- end }}
  </nav>
</footer>
{{- end }}

{{- end }}