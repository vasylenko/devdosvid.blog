<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>fun on Serhii Vasylenko</title>
        <link>https://serhii.vasylenko.info/tags/fun/</link>
        <description>Recent content in fun on Serhii Vasylenko</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Sun, 14 Feb 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://serhii.vasylenko.info/tags/fun/index.xml" rel="self" type="application/rss+xml" />
        <item>
            <title>Using TinyPNG Image Compression From MacOS Finder Contextual Menu</title>
            <link>https://serhii.vasylenko.info/2021/02/14/image-compression-with-tinypng-from-macos-contextual-menu.html</link>
            <pubDate>Sun, 14 Feb 2021 00:00:00 +0000</pubDate>
            
            <guid>https://serhii.vasylenko.info/2021/02/14/image-compression-with-tinypng-from-macos-contextual-menu.html</guid>
            <description>&lt;p&gt;I just wanted to compress one image, but went to far&amp;hellip;&lt;/p&gt;
&lt;p&gt;or &amp;ldquo;How to add TinyPNG image compression to your macOS Finder contextual menu.&amp;rdquo;&lt;/p&gt;
&lt;h1 id=&#34;what-is-it-and-how-it-works&#34;&gt;What is it and how it works&lt;/h1&gt;
&lt;p&gt;You select needed files or folders, then right-click on them, click on the Services menu item and choose TinyPNG.&lt;/p&gt;
&lt;p&gt;After a moment, the new optimized versions of images will appear near to original files.&lt;/p&gt;
&lt;p&gt;If you selected a folder along with the files, the script would process all &lt;code&gt;png&lt;/code&gt; and &lt;code&gt;jpeg&lt;/code&gt; files in it.&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;context_menu_full_compressed.gif&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h1&gt;
&lt;p&gt;You need to register at TinyPNG and get your API key here — &lt;a href=&#34;https://tinypng.com/developers&#34;&gt;Developer API&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;They sometimes block some countries (for example, Ukraine) from registration; in that case, try to use a web-proxy or VPN.&lt;/p&gt;
&lt;h1 id=&#34;how-to-create-quick-action-workflow&#34;&gt;How to create Quick Action Workflow&lt;/h1&gt;
&lt;p&gt;Open Automator application. If you never used this app before, please read about it on the official &lt;a href=&#34;https://support.apple.com/guide/automator/create-a-workflow-aut7cac58839/2.10/mac/11.0&#34;&gt;user guide website&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;On the New Action screen, chose &lt;strong&gt;Quick Action&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;quick_action_compressed.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;After you click the &amp;ldquo;Choose&amp;rdquo; button, you&amp;rsquo;ll see the workflow configuration window.&lt;/p&gt;
&lt;h1 id=&#34;workflow-configuration&#34;&gt;Workflow configuration&lt;/h1&gt;
&lt;p&gt;Find the &lt;strong&gt;Run Shell Script&lt;/strong&gt; action on the Utilities list in Library on the left, and drag it onto the right side of the panel.&lt;/p&gt;
&lt;p&gt;Set the following workflow configuration options as described below:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Workflow receives current&lt;/strong&gt; &lt;code&gt;files and folders&lt;/code&gt; &lt;strong&gt;in&lt;/strong&gt; &lt;code&gt;Finder&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Shell&lt;/strong&gt; &lt;code&gt;/bin/zsh&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pass input&lt;/strong&gt; &lt;code&gt;as arguments&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Click the &lt;strong&gt;Option&lt;/strong&gt; button at the bottom of the Action window and &lt;strong&gt;Uncheck&lt;/strong&gt; &lt;code&gt;Show this action when the workflow runs.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;run_shell_script_compressed.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Put the following script into the &lt;strong&gt;Run Shell Script&lt;/strong&gt; window, replacing the &lt;em&gt;YOUR_API_KEY_HERE&lt;/em&gt; string with your API key obtained from TinyPNG.&lt;/p&gt;
&lt;p&gt;{% gist 13cb423aa83265e79ac5ad900195603f %}&lt;/p&gt;
&lt;h2 id=&#34;utilities-used-in-the-script--explained&#34;&gt;Utilities used in the script — explained&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;curl&lt;/code&gt; — used to make web requests (like your browser does)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;grep&lt;/code&gt; — used to parse the response for the needed header (i.e., field) with the file download link&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cut&lt;/code&gt; — used to extract the URL from the parsed result&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sed&lt;/code&gt; — used to remove the trailing &amp;ldquo;carriage return&amp;rdquo; symbol at the end of extracted string&lt;/p&gt;
&lt;p&gt;The response body also contains a JSON object that includes the download URL; you can parse it with &lt;code&gt;jq&lt;/code&gt;, for example. But I intentionally refused to use the &lt;code&gt;jq&lt;/code&gt; tool because it is not pre-installed in MacOS.&lt;/p&gt;
&lt;h1 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;It is simple, and it does its job fine. And you don&amp;rsquo;t need to install anything to make it work.&lt;/p&gt;
&lt;p&gt;To make this a bit fancier, you might also like to add a &amp;ldquo;Display Notification&amp;rdquo; (from the Utilities library on the left) after the &amp;ldquo;Run Shell Script&amp;rdquo;. The action will display a notification once image processing is completed.&lt;/p&gt;
&lt;p&gt;Thank you for reading!&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>