<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>What are Terraform Modules and how do they work? | Serhii Vasylenko</title>
<meta name=keywords content="terraform,tutorial">
<meta name=description content="Explanation of Terraform modules and their main concepts in English.">
<meta name=author content="Serhii Vasylenko">
<link rel=canonical href=https://www.freecodecamp.org/news/terraform-modules-explained/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.702036ea97a5d9c8c1b3a1362228db44b93885ec3ead997e5ec5b2d376d3656d.css integrity="sha256-cCA26pel2cjBs6E2IijbRLk4hew+rZl+XsWy03bTZW0=" rel="preload stylesheet" as=style>
<link rel=preload href=/apple-touch-icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://serhii.vasylenko.info/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://serhii.vasylenko.info/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://serhii.vasylenko.info/favicon-32x32.png>
<link rel=apple-touch-icon href=https://serhii.vasylenko.info/apple-touch-icon.png>
<link rel=mask-icon href=https://serhii.vasylenko.info/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.0">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GK7SE0XWGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-GK7SE0XWGK',{anonymize_ip:!1})}</script>
<meta property="og:title" content="What are Terraform Modules and how do they work?">
<meta property="og:description" content="Explanation of Terraform modules and their main concepts in English.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://serhii.vasylenko.info/2020/09/09/terraform-modules-explained.html">
<meta property="og:image" content="https://serhii.vasylenko.info/terraform-modules.jpeg"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-09-09T00:00:00+00:00">
<meta property="article:modified_time" content="2020-09-09T00:00:00+00:00"><meta property="og:site_name" content="Serhii Vasylenko — Personal Blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://serhii.vasylenko.info/terraform-modules.jpeg">
<meta name=twitter:title content="What are Terraform Modules and how do they work?">
<meta name=twitter:description content="Explanation of Terraform modules and their main concepts in English.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://serhii.vasylenko.info/posts/"},{"@type":"ListItem","position":3,"name":"What are Terraform Modules and how do they work?","item":"https://serhii.vasylenko.info/2020/09/09/terraform-modules-explained.html"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"What are Terraform Modules and how do they work?","name":"What are Terraform Modules and how do they work?","description":"Explanation of Terraform modules and their main concepts in English.","keywords":["terraform","tutorial"],"articleBody":"Surprisingly, a lot of beginners skip over Terraform modules for the sake of simplicity, or so they think. Later, they find themselves going through hundreds of lines of configuration code.\nI assume you already know some basics about Terraform or even tried to use it in some way before reading the article.\nPlease note: I do not use real code examples with some specific provider like AWS or Google intentionally, just for the sake of simplicity.\nTerraform modules You already write modules even if you think you don’t.\nEven when you don’t create a module intentionally, if you use Terraform, you are already writing a module – a so-called “root” module.\nAny number of Terraform configuration files (.tf) in a directory (even one) forms a module.\nWhat does the module do? A Terraform module allows you to create logical abstraction on the top of some resource set. In other words, a module allows you to group resources together and reuse this group later, possibly many times.\nLet’s assume we have a virtual server with some features hosted in the cloud. What set of resources might describe that server? For example: – the virtual machine itself (created from some image) – an attached block device of specified size (for additional storage) – a static public IP mapped to the server’s virtual network interface – a set of firewall rules to be attached to the server – something else… (i.e. another block device, additional network interface, etc)\nNow let’s assume that you need to create this server with a set of resources many times. This is where modules are really helpful – you don’t want to repeat the same configuration code over and over again, do you?\nHere is an example that illustrates how our “server” module might be called. “To call a module” means to use it in the configuration file.\nHere we create 5 instances of the “server” using single set of configurations (in the module):\n1 2 3 4 5 6 7  module \"server\" { count = 5 source = \"./module_server\" some_variable = some_value }   Modules organisation: child and root Of course, you would probably want to create more than one module. Here are some common examples:\n for a network (i.e. VPC) for a static content hosting (i.e. buckets) for a load balancer and it’s related resources for a logging configuration and whatever else you consider a distinct logical component of the infrastructure  Let’s say we have two different modules: a “server” module and a “network” module. The module called “network” is where we define and configure our virtual network and place servers in it:\n1 2 3 4 5 6 7 8 9  module \"server\" { source = \"./module_server\" some_variable = some_value } module \"network\" { source = \"./module_network\" some_other_variable = some_other_value }   Once we have some custom modules, we can refer to them as “child” modules. And the configuration file where we call child modules relates to the root module.\nA child module can be sourced from a number of places:\n local paths official Terraform Registry (if you’re familiar with other registries, i.e. Docker Registry then you already understand the idea) Git repository (a custom one or GitHub/BitBucket) HTTP URL to .zip archive with module  But how can you pass resources details between modules?\nIn our example, the servers should be created in a network. So how can we tell the “server” module to create VMs in a network which was created in a module called “network”?\nThis is where encapsulation comes in.\nModule encapsulation Encapsulation in Terraform consists of two basic concepts: module scope and explicit resources exposure.\nModule Scope All resource instances, names, and therefore, resource visibility, are isolated in a module’s scope. For example, module “A” can’t see and does not know about resources in module “B” by default.\nResource visibility, sometimes called resource isolation, ensures that resources will have unique names within a module’s namespace. For example, with our 5 instances of the “server” module:\n1 2 3  module.server[0].resource_type.resource_name module.server[1].resource_type.resource_name module.server[2].resource_type.resource_name   On the other hand, we could create two instances of the same module with different names:\n1 2 3 4 5 6 7 8  module \"server-alpha\" { source = \"./module_server\" some_variable = some_value } module \"server-beta\" { source = \"./module_server\" some_variable = some_value }   In this case, the naming or address of resources would be as follows:\n1 2 3  module.server-alpha.resource_type.resource_name module.server-beta.resource_type.resource_name   Explicit resources exposure If you want to access some details for the resources in another module, you’ll need to explicitly configure that.\nBy default, our module “server” doesn’t know about the network that was created in the “network” module.\nSo we must declare an output value in the “network” module to export its resource, or an attribute of a resource, to other modules.\nThe module “server” must declare a variable to be used later as the input.\nThis explicit declaration of the output is the way to expose some resource (or information about it) outside — to the scope of the ‘root’ module, hence to make it available for other modules.\nNext, when we call the child module “server” in the root module, we should assign the output from the “network” module to the variable of the “server” module:\n1  network_id = module.network.network_id   Here is how the final code for calling our child modules will look like in result:\n1 2 3 4 5 6 7 8 9 10 11  module \"server\" { count = 5 source = \"./module_server\" some_variable = some_value network_id = module.network.network_id } module \"network\" { source = \"./module_network\" some_other_variable = some_other_value }   This example configuration would create 5 instances of the same server, with all the necessary resources, in the network we created with as a separate module.\nWrap up Now you should understand what modules are and what do they do.\nIf you’re at the beginning of your Terraform journey, here are some suggestions for the next steps.\nI encourage you to take this short tutorial from HashiCorp, the creators of Terraform, about modules: “Organize Configuration”\nAlso, there is a great comprehensive study guide which covers everything from beginner to advanced concepts about Terraform: “Study Guide - Terraform Associate Certification”\nThe modular code structure makes your configuration more flexible and yet easy to be understood by others. The latter is especially useful in teamwork.\n This article was originaly published on FreeCodeCamp paltform by me, but I still want to keep it here for the record. Canonical link to original publication was properly set in the page headers. ","wordCount":"1082","inLanguage":"en","image":"https://serhii.vasylenko.info/terraform-modules.jpeg","datePublished":"2020-09-09T00:00:00Z","dateModified":"2020-09-09T00:00:00Z","author":{"@type":"Person","name":"Serhii Vasylenko"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://serhii.vasylenko.info/2020/09/09/terraform-modules-explained.html"},"publisher":{"@type":"Person","name":"Serhii Vasylenko","logo":{"@type":"ImageObject","url":"https://serhii.vasylenko.info/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://serhii.vasylenko.info accesskey=h title="Home (Alt + H)">
<img src=/apple-touch-icon.png alt=logo aria-label=logo height=" 30px">Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://serhii.vasylenko.info/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://serhii.vasylenko.info/about/ title="About me">
<span>About me</span>
</a>
</li>
<li>
<a href=https://serhii.vasylenko.info/cv/ title="My CV">
<span>My CV</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://serhii.vasylenko.info>Home</a>&nbsp;»&nbsp;<a href=https://serhii.vasylenko.info/posts/>Posts</a></div>
<h1 class=post-title>
What are Terraform Modules and how do they work?
</h1>
<div class=post-description>
Explanation of Terraform modules and their main concepts in English.
</div>
<div class=post-meta>September 9, 2020&nbsp;·&nbsp;Serhii Vasylenko&nbsp;|&nbsp;<a href=mailto:email-from-blog@vasylenko.info rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<figure class=entry-cover>
<img loading=lazy srcset="https://serhii.vasylenko.info/2020/09/09/terraform-modules_hu31ee2f290b2bedab56c975b89fb949f9_96775_360x0_resize_q75_box.jpeg 360w ,https://serhii.vasylenko.info/2020/09/09/terraform-modules_hu31ee2f290b2bedab56c975b89fb949f9_96775_480x0_resize_q75_box.jpeg 480w ,https://serhii.vasylenko.info/2020/09/09/terraform-modules_hu31ee2f290b2bedab56c975b89fb949f9_96775_720x0_resize_q75_box.jpeg 720w ,https://serhii.vasylenko.info/2020/09/09/terraform-modules_hu31ee2f290b2bedab56c975b89fb949f9_96775_1080x0_resize_q75_box.jpeg 1080w ,https://serhii.vasylenko.info/2020/09/09/terraform-modules.jpeg 1280w" sizes="(min-width: 768px) 720px, 100vw" src=https://serhii.vasylenko.info/2020/09/09/terraform-modules.jpeg alt width=1280 height=640>
</figure><div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#terraform-modules aria-label="Terraform modules">Terraform modules</a><ul>
<li>
<a href=#what-does-the-module-do aria-label="What does the module do?">What does the module do?</a></li>
<li>
<a href=#modules-organisation-child-and-root aria-label="Modules organisation: child and root">Modules organisation: child and root</a></li></ul>
</li>
<li>
<a href=#module-encapsulation aria-label="Module encapsulation">Module encapsulation</a><ul>
<li>
<a href=#module-scope aria-label="Module Scope">Module Scope</a></li>
<li>
<a href=#explicit-resources-exposure aria-label="Explicit resources exposure">Explicit resources exposure</a></li>
<li>
<a href=#wrap-up aria-label="Wrap up">Wrap up</a><ul>
<ul>
<ul>
<li>
<a href=#this-article-was-originaly-published-on-freecodecamp-paltform-by-me-but-i-still-want-to-keep-it-here-for-the-record-canonical-link-to-original-publication-was-properly-set-in-the-page-headers aria-label="This article was originaly published on FreeCodeCamp paltform by me, but I still want to keep it here for the record. Canonical link to original publication was properly set in the page headers.">This article was originaly published on FreeCodeCamp paltform by me, but I still want to keep it here for the record. Canonical link to original publication was properly set in the page headers.</a>
</li>
</ul>
</li>
</ul>
</ul>
</ul>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>Surprisingly, a lot of beginners skip over Terraform modules for the sake of simplicity, or so they think. Later, they find themselves going through hundreds of lines of configuration code.</p>
<p>I assume you already know some basics about Terraform or even tried to use it in some way before reading the article.</p>
<p>Please note: I do not use real code examples with some specific provider like AWS or Google intentionally, just for the sake of simplicity.</p>
<h2 id=terraform-modules>Terraform modules<a hidden class=anchor aria-hidden=true href=#terraform-modules>#</a></h2>
<p>You already write modules even if you think you don’t.</p>
<p>Even when you don&rsquo;t create a module intentionally, if you use Terraform, you are already writing a module – a so-called &ldquo;root&rdquo; module.</p>
<p>Any number of Terraform configuration files <code>(.tf)</code> in a directory (even one) forms a module.</p>
<h3 id=what-does-the-module-do>What does the module do?<a hidden class=anchor aria-hidden=true href=#what-does-the-module-do>#</a></h3>
<p>A Terraform module allows you to create logical abstraction on the top of some resource set. In other words, a module allows you to group resources together and reuse this group later, possibly many times.</p>
<p>Let&rsquo;s assume we have a virtual server with some features hosted in the cloud. What set of resources might describe that server? For example:
– the virtual machine itself (created from some image)
– an attached block device of specified size (for additional storage)
– a static public IP mapped to the server&rsquo;s virtual network interface
– a set of firewall rules to be attached to the server
– something else&mldr; (i.e. another block device, additional network interface, etc)</p>
<p><img loading=lazy src=1.png alt>
</p>
<p>Now let&rsquo;s assume that you need to create this server with a set of resources many times. This is where modules are really helpful – you don&rsquo;t want to repeat the same configuration code over and over again, do you?</p>
<p>Here is an example that illustrates how our &ldquo;server&rdquo; module might be called.
&ldquo;To call a module&rdquo; means to use it in the configuration file.</p>
<p>Here we create 5 instances of the &ldquo;server&rdquo; using single set of configurations (in the module):</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>module &#34;server&#34; {
    
    count         = 5
    
    source        = &#34;./module_server&#34;
    some_variable = some_value
}
</code></pre></td></tr></table>
</div>
</div><h3 id=modules-organisation-child-and-root>Modules organisation: child and root<a hidden class=anchor aria-hidden=true href=#modules-organisation-child-and-root>#</a></h3>
<p>Of course, you would probably want to create more than one module. Here are some common examples:</p>
<ul>
<li>for a network (i.e. VPC)</li>
<li>for a static content hosting (i.e. buckets)</li>
<li>for a load balancer and it&rsquo;s related resources</li>
<li>for a logging configuration</li>
<li>and whatever else you consider a distinct logical component of the infrastructure</li>
</ul>
<p>Let&rsquo;s say we have two different modules: a &ldquo;server&rdquo; module and a &ldquo;network&rdquo; module. The module called &ldquo;network&rdquo; is where we define and configure our virtual network and place servers in it:</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>module &#34;server&#34; {
    source        = &#34;./module_server&#34;
    some_variable = some_value
}

module &#34;network&#34; {  
    source              = &#34;./module_network&#34;
    some_other_variable = some_other_value
}
</code></pre></td></tr></table>
</div>
</div><p>Once we have some custom modules, we can refer to them as &ldquo;child&rdquo; modules. And the configuration file where we call child modules relates to the root module.</p>
<p><img loading=lazy src=2.png alt>
</p>
<p>A child module can be sourced from a number of places:</p>
<ul>
<li>local paths</li>
<li>official Terraform Registry (if you&rsquo;re familiar with other registries, i.e. Docker Registry then you already understand the idea)</li>
<li>Git repository (a custom one or GitHub/BitBucket)</li>
<li>HTTP URL to .zip archive with module</li>
</ul>
<p>But how can you pass resources details between modules?</p>
<p>In our example, the servers should be created in a network. So how can we tell the &ldquo;server&rdquo; module to create VMs in a network which was created in a module called &ldquo;network&rdquo;?</p>
<p>This is where <strong>encapsulation</strong> comes in.</p>
<h2 id=module-encapsulation>Module encapsulation<a hidden class=anchor aria-hidden=true href=#module-encapsulation>#</a></h2>
<p>Encapsulation in Terraform consists of two basic concepts: module scope and explicit resources exposure.</p>
<h3 id=module-scope>Module Scope<a hidden class=anchor aria-hidden=true href=#module-scope>#</a></h3>
<p>All resource instances, names, and therefore, resource visibility, are isolated in a module&rsquo;s scope. For example, module &ldquo;A&rdquo; can&rsquo;t see and does not know about resources in module &ldquo;B&rdquo; by default.</p>
<p>Resource visibility, sometimes called resource isolation, ensures that resources will have unique names within a module&rsquo;s namespace. For example, with our 5 instances of the &ldquo;server&rdquo; module:</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>module.server[0].resource_type.resource_name
module.server[1].resource_type.resource_name
module.server[2].resource_type.resource_name
</code></pre></td></tr></table>
</div>
</div><p>On the other hand, we could create two instances of the same module with different names:</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>module &#34;server-alpha&#34; {    
    source        = &#34;./module_server&#34;
    some_variable = some_value
}
module &#34;server-beta&#34; {
    source        = &#34;./module_server&#34;
    some_variable = some_value
}
</code></pre></td></tr></table>
</div>
</div><p>In this case, the naming or address of resources would be as follows:</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>module.server-alpha.resource_type.resource_name

module.server-beta.resource_type.resource_name
</code></pre></td></tr></table>
</div>
</div><h3 id=explicit-resources-exposure>Explicit resources exposure<a hidden class=anchor aria-hidden=true href=#explicit-resources-exposure>#</a></h3>
<p>If you want to access some details for the resources in another module, you&rsquo;ll need to explicitly configure that.</p>
<p>By default, our module &ldquo;server&rdquo; doesn&rsquo;t know about the network that was created in the &ldquo;network&rdquo; module.</p>
<p><img loading=lazy src=3.png alt>
</p>
<p>So we must declare an <code>output</code> value in the &ldquo;network&rdquo; module to export its resource, or an attribute of a resource, to other modules.</p>
<p>The module &ldquo;server&rdquo; must declare a <code>variable</code> to be used later as the input.</p>
<p><img loading=lazy src=4.png alt>
</p>
<p>This explicit declaration of the output is the way to expose some resource (or information about it) outside — to the scope of the &lsquo;root&rsquo; module, hence to make it available for other modules.</p>
<p>Next, when we call the child module &ldquo;server&rdquo; in the root module, we should assign the output from the &ldquo;network&rdquo; module to the variable of the &ldquo;server&rdquo; module:</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>network_id = module.network.network_id
</code></pre></td></tr></table>
</div>
</div><p>Here is how the final code for calling our child modules will look like in result:</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>module &#34;server&#34; {
    count         = 5
    source        = &#34;./module_server&#34;
    some_variable = some_value
    network_id    = module.network.network_id
}

module &#34;network&#34; {  
    source              = &#34;./module_network&#34;
    some_other_variable = some_other_value
}
</code></pre></td></tr></table>
</div>
</div><p>This example configuration would create 5 instances of the same server, with all the necessary resources, in the network we created with as a separate module.</p>
<h3 id=wrap-up>Wrap up<a hidden class=anchor aria-hidden=true href=#wrap-up>#</a></h3>
<p>Now you should understand what modules are and what do they do.</p>
<p>If you&rsquo;re at the beginning of your Terraform journey, here are some suggestions for the next steps.</p>
<p>I encourage you to take this short tutorial from HashiCorp, the creators of Terraform, about modules: <a href=https://learn.hashicorp.com/collections/terraform/modules>&ldquo;Organize Configuration&rdquo;</a></p>
<p>Also, there is a great comprehensive study guide which covers everything from beginner to advanced concepts about Terraform: <a href="https://learn.hashicorp.com/tutorials/terraform/associate-study?in=terraform/certification">&ldquo;Study Guide - Terraform Associate Certification&rdquo;</a></p>
<p>The modular code structure makes your configuration more flexible and yet easy to be understood by others. The latter is especially useful in teamwork.</p>
<hr>
<h6 id=this-article-was-originaly-published-on-freecodecamp-paltform-by-me-but-i-still-want-to-keep-it-here-for-the-record-canonical-link-to-original-publication-was-properly-set-in-the-page-headers>This article was originaly published on FreeCodeCamp paltform by me, but I still want to keep it here for the record. Canonical link to original publication was properly set in the page headers.<a hidden class=anchor aria-hidden=true href=#this-article-was-originaly-published-on-freecodecamp-paltform-by-me-but-i-still-want-to-keep-it-here-for-the-record-canonical-link-to-original-publication-was-properly-set-in-the-page-headers>#</a></h6>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://serhii.vasylenko.info/tags/terraform/>terraform</a></li>
<li><a href=https://serhii.vasylenko.info/tags/tutorial/>tutorial</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://serhii.vasylenko.info/2020/09/15/terraform-certification-tips.html>
<span class=title>« Prev Page</span>
<br>
<span>Terraform Certification Tips</span>
</a>
<a class=next href=https://serhii.vasylenko.info/2020/08/25/terraform-cli-shortcuts.html>
<span class=title>Next Page »</span>
<br>
<span>Terraform CLI shortcuts</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share What are Terraform Modules and how do they work? on twitter" href="https://twitter.com/intent/tweet/?text=What%20are%20Terraform%20Modules%20and%20how%20do%20they%20work%3f&url=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f09%2f09%2fterraform-modules-explained.html&hashtags=terraform%2ctutorial"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share What are Terraform Modules and how do they work? on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f09%2f09%2fterraform-modules-explained.html&title=What%20are%20Terraform%20Modules%20and%20how%20do%20they%20work%3f&summary=What%20are%20Terraform%20Modules%20and%20how%20do%20they%20work%3f&source=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f09%2f09%2fterraform-modules-explained.html"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share What are Terraform Modules and how do they work? on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f09%2f09%2fterraform-modules-explained.html&title=What%20are%20Terraform%20Modules%20and%20how%20do%20they%20work%3f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share What are Terraform Modules and how do they work? on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f09%2f09%2fterraform-modules-explained.html"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://serhii.vasylenko.info>Serhii Vasylenko</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>