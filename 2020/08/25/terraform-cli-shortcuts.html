<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Terraform CLI shortcuts | Serhii Vasylenko</title><meta name=keywords content="terraform,cli,automation"><meta name=description content="A bunch of small tools I use to simplify Terraform workflow"><meta name=author content="Serhii Vasylenko"><link rel=canonical href=https://serhii.vasylenko.info/2020/08/25/terraform-cli-shortcuts.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.a89e0386ca160c2cca1b08ed0c9bfecbfcd97d3664be021c678a03a6a8fbb895.css integrity="sha256-qJ4DhsoWDCzKGwjtDJv+y/zZfTZkvgIcZ4oDpqj7uJU=" rel="preload stylesheet" as=style><link rel=preload href=/apple-touch-icon.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://serhii.vasylenko.info/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://serhii.vasylenko.info/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://serhii.vasylenko.info/favicon-32x32.png><link rel=apple-touch-icon href=https://serhii.vasylenko.info/apple-touch-icon.png><link rel=mask-icon href=https://serhii.vasylenko.info/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.89.2"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-GK7SE0XWGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-GK7SE0XWGK',{anonymize_ip:!1})}</script><meta property="og:title" content="Terraform CLI shortcuts"><meta property="og:description" content="A bunch of small tools I use to simplify Terraform workflow"><meta property="og:type" content="article"><meta property="og:url" content="https://serhii.vasylenko.info/2020/08/25/terraform-cli-shortcuts.html"><meta property="og:image" content="https://serhii.vasylenko.info/2020-08-25-terraform-cli-shortcuts.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-25T00:00:00+00:00"><meta property="article:modified_time" content="2020-08-25T00:00:00+00:00"><meta property="og:site_name" content="Serhii Vasylenko â€” Personal Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://serhii.vasylenko.info/2020-08-25-terraform-cli-shortcuts.jpg"><meta name=twitter:title content="Terraform CLI shortcuts"><meta name=twitter:description content="A bunch of small tools I use to simplify Terraform workflow"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://serhii.vasylenko.info/posts/"},{"@type":"ListItem","position":3,"name":"Terraform CLI shortcuts","item":"https://serhii.vasylenko.info/2020/08/25/terraform-cli-shortcuts.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Terraform CLI shortcuts","name":"Terraform CLI shortcuts","description":"A bunch of small tools I use to simplify Terraform workflow","keywords":["terraform","cli","automation"],"articleBody":"Here is some CLI shortcuts I use day-to-day to simplify and speed-up my Terraform workflow. Requirements â€” bash-compatible interpreter, because aliases and functions described below will work with bash, zsh and ohmyzsh.\nIn order to use any of described aliases of functions, you need to place it in your ~/.bashrc or ~/.zshrc file (or any other configuration file you have for your shell).\nThen just source this file, for example: source ~/.zshrc\nFunction: list outputs and variables of given module You need to provide the path to module directory, and this function will list all declared variables and outputs module has. It comes very useful when you donâ€™t remember them all and just need to take a quick look.\n## TerraForm MOdule Explained function tfmoe { echo -e \"\\nOutputs:\" grep -r \"output \\\".*\\\"\" $1 |awk '{print \"\\t\",$2}' |tr -d '\"' echo -e \"\\nVariables:\" grep -r \"variable \\\".*\\\"\" $1 |awk '{print \"\\t\",$2}' |tr -d '\"' } Example usage:\nuser@localhost $: tfmoe ./module_alb Outputs: alb_arn Variables: acm_certificate_arn lb_name alb_sg_list subnets_id_list tags Function: pre-fill module directory with configuration files You need to provide a path to the module directory and this function will create a bunch of empty â€˜defaultâ€™ .tf files in it.\n#TerraForm MOdule Initialize function tfmoi { touch $1/variables.tf touch $1/outputs.tf touch $1/versions.tf touch $1/main.tf } Example usage:\nuser@localhost $: mkdir ./module_foo \u0026\u0026 temoi $_ user@localhost $: ls ./module_foo main.tf outputs.tf variables.tf versions.tf Aliases The purpose of these aliases is just to keep you from typing long commands when you want to do a simple action.\nalias tf='terraform' alias tfv='terraform validate' alias tfi='terraform init' alias tfp='terraform plan' This one is useful because it makes format tool to go in-depth (recursively) through directories.\nalias tfm='terraform fmt -recursive' Example usage:\nuser@localhost $: tfm module_ecs_cluster/ecs.tf module_alb/alb.tf ","wordCount":"292","inLanguage":"en","image":"https://serhii.vasylenko.info/2020-08-25-terraform-cli-shortcuts.jpg","datePublished":"2020-08-25T00:00:00Z","dateModified":"2020-08-25T00:00:00Z","author":{"@type":"Person","name":"Serhii Vasylenko"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://serhii.vasylenko.info/2020/08/25/terraform-cli-shortcuts.html"},"publisher":{"@type":"Person","name":"Serhii Vasylenko","logo":{"@type":"ImageObject","url":"https://serhii.vasylenko.info/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://serhii.vasylenko.info accesskey=h title="Home (Alt + H)"><img src=/apple-touch-icon.png alt=logo aria-label=logo height=" 30px">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://serhii.vasylenko.info/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://serhii.vasylenko.info/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://serhii.vasylenko.info/about/ title="About me"><span>About me</span></a></li><li><a href=https://serhii.vasylenko.info/cv/ title="My CV"><span>My CV</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://serhii.vasylenko.info>Home</a>&nbsp;Â»&nbsp;<a href=https://serhii.vasylenko.info/posts/>Posts</a></div><h1 class=post-title>Terraform CLI shortcuts</h1><div class=post-description>A bunch of small tools I use to simplify Terraform workflow</div><div class=post-meta><span title="2020-08-25 00:00:00 +0000 UTC">August 25, 2020</span>&nbsp;Â·&nbsp;Serhii Vasylenko&nbsp;|&nbsp;<a href=mailto:email-from-blog@vasylenko.info rel="noopener noreferrer" target=_blank>ðŸ“© Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy srcset="https://serhii.vasylenko.info/2020/08/25/2020-08-25-terraform-cli-shortcuts_hu35794ecd023b9d2787a376e1c246f384_144141_360x0_resize_q75_box.jpg 360w ,https://serhii.vasylenko.info/2020/08/25/2020-08-25-terraform-cli-shortcuts_hu35794ecd023b9d2787a376e1c246f384_144141_480x0_resize_q75_box.jpg 480w ,https://serhii.vasylenko.info/2020/08/25/2020-08-25-terraform-cli-shortcuts_hu35794ecd023b9d2787a376e1c246f384_144141_720x0_resize_q75_box.jpg 720w ,https://serhii.vasylenko.info/2020/08/25/2020-08-25-terraform-cli-shortcuts_hu35794ecd023b9d2787a376e1c246f384_144141_1080x0_resize_q75_box.jpg 1080w ,https://serhii.vasylenko.info/2020/08/25/2020-08-25-terraform-cli-shortcuts.jpg 1280w" sizes="(min-width: 768px) 720px, 100vw" src=https://serhii.vasylenko.info/2020/08/25/2020-08-25-terraform-cli-shortcuts.jpg alt width=1280 height=670></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#function-list-outputs-and-variables-of-given-module aria-label="Function: list outputs and variables of given module">Function: list outputs and variables of given module</a></li><li><a href=#function-pre-fill-module-directory-with-configuration-files aria-label="Function: pre-fill module directory with configuration files">Function: pre-fill module directory with configuration files</a></li><li><a href=#aliases aria-label=Aliases>Aliases</a></li></ul></div></details></div><div class=post-content><p>Here is some CLI shortcuts I use day-to-day to simplify and speed-up my Terraform workflow.
Requirements &mdash; bash-compatible interpreter, because aliases and functions described below will work with bash, zsh and ohmyzsh.</p><p>In order to use any of described aliases of functions, you need to place it in your <code>~/.bashrc</code> or <code>~/.zshrc</code> file (or any other configuration file you have for your shell).</p><p>Then just source this file, for example: <code>source ~/.zshrc</code></p><h2 id=function-list-outputs-and-variables-of-given-module>Function: list outputs and variables of given module<a hidden class=anchor aria-hidden=true href=#function-list-outputs-and-variables-of-given-module>#</a></h2><p>You need to provide the path to module directory, and this function will list all declared variables and outputs module has. It comes very useful when you don&rsquo;t remember them all and just need to take a quick look.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#999;font-style:italic>## TerraForm MOdule Explained</span>
<span style=color:#6ab825;font-weight:700>function</span> tfmoe {
  <span style=color:#24909d>echo</span> -e <span style=color:#ed9d13>&#34;\nOutputs:&#34;</span>
  grep -r <span style=color:#ed9d13>&#34;output \&#34;.*\&#34;&#34;</span> <span style=color:#40ffff>$1</span> |awk <span style=color:#ed9d13>&#39;{print &#34;\t&#34;,$2}&#39;</span> |tr -d <span style=color:#ed9d13>&#39;&#34;&#39;</span>
  <span style=color:#24909d>echo</span> -e <span style=color:#ed9d13>&#34;\nVariables:&#34;</span>
  grep -r <span style=color:#ed9d13>&#34;variable \&#34;.*\&#34;&#34;</span> <span style=color:#40ffff>$1</span> |awk <span style=color:#ed9d13>&#39;{print &#34;\t&#34;,$2}&#39;</span> |tr -d <span style=color:#ed9d13>&#39;&#34;&#39;</span>
}</code></pre></div><p>Example usage:</p><pre tabindex=0><code class=language-terminal data-lang=terminal>user@localhost $: tfmoe ./module_alb

Outputs:
	 alb_arn

Variables:
	 acm_certificate_arn
	 lb_name
	 alb_sg_list
	 subnets_id_list
	 tags
</code></pre><h2 id=function-pre-fill-module-directory-with-configuration-files>Function: pre-fill module directory with configuration files<a hidden class=anchor aria-hidden=true href=#function-pre-fill-module-directory-with-configuration-files>#</a></h2><p>You need to provide a path to the module directory and this function will create a bunch of empty &lsquo;default&rsquo; .tf files in it.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#999;font-style:italic>#TerraForm MOdule Initialize</span>
<span style=color:#6ab825;font-weight:700>function</span> tfmoi {
  touch <span style=color:#40ffff>$1</span>/variables.tf
  touch <span style=color:#40ffff>$1</span>/outputs.tf
  touch <span style=color:#40ffff>$1</span>/versions.tf
  touch <span style=color:#40ffff>$1</span>/main.tf
}
</code></pre></div><p>Example usage:</p><pre tabindex=0><code class=language-terminal data-lang=terminal>user@localhost $: mkdir ./module_foo &amp;&amp; temoi $_

user@localhost $: ls ./module_foo
main.tf      outputs.tf   variables.tf versions.tf
</code></pre><h2 id=aliases>Aliases<a hidden class=anchor aria-hidden=true href=#aliases>#</a></h2><p>The purpose of these aliases is just to keep you from typing long commands when you want to do a simple action.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#24909d>alias</span> <span style=color:#40ffff>tf</span>=<span style=color:#ed9d13>&#39;terraform&#39;</span>

<span style=color:#24909d>alias</span> <span style=color:#40ffff>tfv</span>=<span style=color:#ed9d13>&#39;terraform validate&#39;</span>

<span style=color:#24909d>alias</span> <span style=color:#40ffff>tfi</span>=<span style=color:#ed9d13>&#39;terraform init&#39;</span>

<span style=color:#24909d>alias</span> <span style=color:#40ffff>tfp</span>=<span style=color:#ed9d13>&#39;terraform plan&#39;</span> 
</code></pre></div><p>This one is useful because it makes format tool to go in-depth (recursively) through directories.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#24909d>alias</span> <span style=color:#40ffff>tfm</span>=<span style=color:#ed9d13>&#39;terraform fmt -recursive&#39;</span>
</code></pre></div><p>Example usage:</p><pre tabindex=0><code class=language-terminal data-lang=terminal>user@localhost $: tfm 
module_ecs_cluster/ecs.tf
module_alb/alb.tf
</code></pre></div><footer class=post-footer><p class=substack-widget-preface>Did you like the article and want to stay in touch? Subscribe to my monthly newsletter with updates:</p><iframe class=substack-widget src=https://devexp.substack.com/embed frameborder=0 scrolling=no></iframe><ul class=post-tags><li><a href=https://serhii.vasylenko.info/tags/terraform/>terraform</a></li><li><a href=https://serhii.vasylenko.info/tags/cli/>cli</a></li><li><a href=https://serhii.vasylenko.info/tags/automation/>automation</a></li></ul><nav class=paginav><a class=prev href=https://serhii.vasylenko.info/2020/09/09/terraform-modules-explained.html><span class=title>Â« Prev Page</span><br><span>What are Terraform Modules and how do they work?</span></a>
<a class=next href=https://serhii.vasylenko.info/2020/08/06/ansible-secrets-aws-ssm-sm.html><span class=title>Next Page Â»</span><br><span>Manage Ansible playbook secrets with AWS services</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://serhii.vasylenko.info>Serhii Vasylenko</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script async defer src=https://simpleanalytics.vasylenko.info/latest.js></script><noscript><img src=https://simpleanalytics.vasylenko.info/noscript.gif alt referrerpolicy=no-referrer-when-downgrade></noscript><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body></html>