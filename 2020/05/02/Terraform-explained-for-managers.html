<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Terraform explained for managers | Serhii Vasylenko</title>
<meta name=keywords content="terraform,tutorials">
<meta name=description content="For those who want to understand the engineering team better and speak on the same technical language - terraform explained.">
<meta name=author content="Serhii Vasylenko">
<link rel=canonical href=https://serhii.vasylenko.info/2020/05/02/Terraform-explained-for-managers.html>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.dceb688ab3beb6b0cf10660a549118a7bff6dcb779c898f5d0f897e26adb88f3.css integrity="sha256-3OtoirO+trDPEGYKVJEYp7/23Ld5yJj10PiX4mrbiPM=" rel="preload stylesheet" as=style>
<link rel=preload href=/apple-touch-icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://serhii.vasylenko.info/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://serhii.vasylenko.info/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://serhii.vasylenko.info/favicon-32x32.png>
<link rel=apple-touch-icon href=https://serhii.vasylenko.info/apple-touch-icon.png>
<link rel=mask-icon href=https://serhii.vasylenko.info/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.0">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GK7SE0XWGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-GK7SE0XWGK',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Terraform explained for managers">
<meta property="og:description" content="For those who want to understand the engineering team better and speak on the same technical language - terraform explained.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://serhii.vasylenko.info/2020/05/02/Terraform-explained-for-managers.html">
<meta property="og:image" content="https://serhii.vasylenko.info/2020-05-02-terraform-explained-for-managers.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-05-02T00:00:00+00:00">
<meta property="article:modified_time" content="2020-05-02T00:00:00+00:00"><meta property="og:site_name" content="Serhii Vasylenko — Personal Blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://serhii.vasylenko.info/2020-05-02-terraform-explained-for-managers.png">
<meta name=twitter:title content="Terraform explained for managers">
<meta name=twitter:description content="For those who want to understand the engineering team better and speak on the same technical language - terraform explained.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://serhii.vasylenko.info/posts/"},{"@type":"ListItem","position":3,"name":"Terraform explained for managers","item":"https://serhii.vasylenko.info/2020/05/02/Terraform-explained-for-managers.html"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Terraform explained for managers","name":"Terraform explained for managers","description":"For those who want to understand the engineering team better and speak on the same technical language - terraform explained.","keywords":["terraform","tutorials"],"articleBody":"This article was written a long time ago in a galaxy far, far away… As a team leader, I have to speak with my teammates on the same language — technical language…\nFor example, I have a good technical background, yet sometimes I have a feeling that my teammates see that I don’t understand them when we discuss some project or a task in-depth. Moreover, I know they are right. Of course, there are plenty of managers who do not have a technical background and they perform great. And some might say that technical skills are not the priority for a manager.\nBut I think that +1 to skills is always better than +0. Of course, it is a question of time and personal interests, one way or another.\nThis is why I decided to share my experience and explain Terraform in one blog post.\nThe language of this article will be ‘techie’ but not too much. This is because I want to highlight the main parts the Terraform consists of. Although, this is not technical documentation (I hope). Code examples will be based on AWS cloud configuration, although in-depth knowledge of AWS is not required to understand them.\nA few words about “Infrastructure as Code” IaC is when you describe and manage your infrastructure as… (guess what?) …code. Literally.\nIn a nutshell that means you can define all the elements (servers, networks, storage, etc.) and resources (memory, cpu, etc) of your infrastructure via configuration files in the version control system (Git, SVN, etc.), and manage it in a way similar to how you manage the source code of the applications: branches, releases, and all that stuff.\nAnd the main idea behind the IaC approach is that it manages the state of things and must be the single source of truth (configuration truth) for your infrastructure. You define the state via the code (at first) and then IaC tool (Terraform, for example) applies this state on the infrastructure: all that is missing according to the code will be created, all that differs from the code will be changed and all that exists in the infrastructure but is not described via code — will be destroyed.\nWhy and when do you need the Terraform for a project? Terraform is a specific tool, hence like any other tool it has its particular application area. There is no strict definition of project kind that needs Terraform (surprise!) but in general, you need to consider using Terraform if you answer ‘yes’ to one of the following questions:\n Do you have multiple logical elements of the same kind (in plural) in your infrastructure, i.e. several web servers, several application servers, several database servers? Do you have numerous environments (or workspaces) where you run your applications, i.e. development, staging, QA, production? Do you spend some significant amount of time managing the changes in the environment(s) where you run your applications?  How does it work? Terraform works with the source code of configuration, and interprets the code into real resources inside on-premise or cloud platforms.\nTerraform supports a lot of platforms: from major cloud providers such as AWS, Azure, GCP, DigitalOcean, to more modest platforms such as OVH, 1\u00261, Hetzner, and others. It also supports infrastructure software such as Docker, Kubernetes, Chef, and even databases and monitoring software. This is why Terraform is so popular — it is a real Swiss knife in the operations world.\nSo to create, change, or destroy the infrastructure Terraform needs the source code. The source code is a set of configuration files that defines your infrastructure state. The code uses its own syntax but it looks very user friendly. Here is an example: the following configuration block describes the virtual server (EC2 instance) in AWS\n1 2 3 4  resource \"aws_instance\" “web_server” {ami = \"ami-a1b2c3d4\"instance_type = \"t3.micro\"}  Terraform can automatically detect the dependencies between resources described in the code, and also allows you to add custom dependencies when needed.\nWhen you apply the code first time, Terraform creates a so-called “state file” that works as a mapping of your code to real resources created in the hosting platform. With each next “apply” action Terraform will use it to compare the code changes with the sate file to decide what should be done (and in what order) against real infrastructure.\nOne of the important functions of the state file is a description of dependencies between the resources. For example (some technical nuances are omitted for purpose of simplicity): if you have a server created inside some network and that network is going to be changed, then Terraform will know that server setting should be changed as well or server should be re-created inside the updated network.\nWhat is inside? Terraform configuration code consists of several elements: providers, resources, modules, input variables, output values, local values, expressions, functions.\nProvider is an entity that defines what exactly is possible to do with cloud or on-premises infrastructure platform you manage via Terraform.\nResource is the most important part of the configuration code. This is where the definition of infrastructure objects happens. Resources are the main building blocks of the whole code.\nEvery resource has a type and local name. For example here is how EC2 instance configuration may look like:\n1 2 3 4  resource “aws_instance” “web_server” {ami = “ami-a1b2c3d4”instance_type = “t3.micro”}  The aws_instance is a resource type and web_server is the resource local name. Later, when Terraform applies this code, it will create an EC2 instance with some particular ID in AWS. Once created, the ID will be stored in the state file with mapping information that logically connects it with web_server.\nThe ami, instance_type and private_ip are the arguments with values which define the actual state of the resource. There are plenty of value types, depending on the particular argument and particular resource type, so I will not focus on them here.\nModules are the kind of logical containers or groups for resources you define and use together. The purpose of modules is not only the grouping of resources but it is also the possibility to reuse the same code with different variables.\nLet’s get back to the example with EC2 instance and say you need to have a static public IP address with it. In such a case, here is how the module for web server may look like:\n1 2 3 4 5 6 7  resource “aws_instance” “web_server” {ami = “ami-a1b2c3d4”instance_type = “t3.micro”}resource “aws_eip” “web_server_public_ip” {instance = “${aws_instance.web_server.id}”}  Having these two resources together allows us to think of it as a stand-alone unit you can reuse later, for example in our development, staging, and production environments. And not by copying and pasting it, but via reference to the module defined only once.\nPlease note: we specified an instance argument inside the aws_eip resource as a reference to another resource details (the ID of an instance). This is possible because of a way how Terraform treats dependencies: when it detects the dependency (or you define it explicitly) it will create the main resource first, and only after it’s created and available it will create the dependent one.\nInput variables work as parameters for the modules so module code could be reusable. Let’s look at the previous example: it has some hardcoded values — instance image ID and instance type. Here is how you can make it more abstract and reusable:\n1 2 3 4 5 6 7 8 9 10  variable “image_id” {type = string}variable “instance_type” {type = string}resource “aws_instance” “web_server” {ami = var.image_idinstance_type = var.instance_type}  Values for the variables then can be passed either via CLI and environment variables (if you have only the one, so-called root module) or via explicit values in the block where you call a module, for example:\n1 2 3 4 5 6 7 8 9 10  module “web_server_production” {source. = “./modules/web_server”image_id = “ami-a1b2c3d4”instance_type = “m5.large”}module “web_server_development” {source = “./modules/web_server”image_id = “ami-a2b3c4d5”instance_type = “t3.micro”}  Output values are similar to the “return” of a function in development language. They can be used for dependencies management (for example, when a module require something from another module) and for the printing of the certain values at the end of Terraform work (for example to be used for notification in CI/CD process).\nLocal values, expressions, functions — three more things that augment the capabilities of Terraform and make it more similar to a programming language (which is great by the way).\nThe local values are used inside modules for extended data manipulations in it.\nThe expressions are used to set the values (for many things), for example, to set the value of some argument in resource configuration. They used either to refer something (just as we referenced instance ID “${aws_instance.web_server.id}” in the example above) or to compute the value within your configuration.\nThe functions in Terraform are built-int jobs you can call to transform and combine values. For example, the tolist() function converts its argument to a list value.\nAnd this is it? Yes, in a very very short words — this is what Terraform is. Not a rocket science if it’s about to manage a small infastructure, but gets more complicated with bigger infrastctucture. As any other engineerign tool or development language, actually.\nOkay, what next? If you read down to this point (anybody?) then it means it worth “get your hands dirty” and to try building your Infrastructure with Terraform. There are plenty of courses and books (and the “Terraform up and running” is one of the most popular), but my learning path started from the following: Official guide from Hashicorp — great and free guide from Terraform developers. Just pick your favorite cloud (AWS, Azure, GCP) and go through the topics.\nOnce you finish this guide, I suggest jumping into the more real-world things and describe the infrastructure of the most common project you work with. For example, here is what I do: small github project – I am trying to describe the Infrastructure for SPA website with services in docker containers at the backend. The variety and complexity of the code are limited only by your fantasy.\nAnother thing worth your attention is A Comprehensive Guide to Terraform.\nAnd I also encourage you to go through the collection of blog posts and talks they share.\n","wordCount":"1709","inLanguage":"en","image":"https://serhii.vasylenko.info/2020-05-02-terraform-explained-for-managers.png","datePublished":"2020-05-02T00:00:00Z","dateModified":"2020-05-02T00:00:00Z","author":{"@type":"Person","name":"Serhii Vasylenko"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://serhii.vasylenko.info/2020/05/02/Terraform-explained-for-managers.html"},"publisher":{"@type":"Person","name":"Serhii Vasylenko","logo":{"@type":"ImageObject","url":"https://serhii.vasylenko.info/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://serhii.vasylenko.info accesskey=h title="Home (Alt + H)">
<img src=/apple-touch-icon.png alt=logo aria-label=logo height=" 30px">Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://serhii.vasylenko.info/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://serhii.vasylenko.info/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://serhii.vasylenko.info/about/ title="About me">
<span>About me</span>
</a>
</li>
<li>
<a href=https://serhii.vasylenko.info/cv/ title="My CV">
<span>My CV</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://serhii.vasylenko.info>Home</a>&nbsp;»&nbsp;<a href=https://serhii.vasylenko.info/posts/>Posts</a></div>
<h1 class=post-title>
Terraform explained for managers
</h1>
<div class=post-description>
For those who want to understand the engineering team better and speak on the same technical language - terraform explained.
</div>
<div class=post-meta>May 2, 2020&nbsp;·&nbsp;Serhii Vasylenko&nbsp;|&nbsp;<a href=mailto:email-from-blog@vasylenko.info rel="noopener noreferrer" target=_blank>📩 Suggest Changes</a>
</div>
</header>
<figure class=entry-cover>
<img loading=lazy srcset="https://serhii.vasylenko.info/2020/05/02/2020-05-02-terraform-explained-for-managers_hubbb6b9f8f45abb2018c0e6ed8710b45c_73745_360x0_resize_box_3.png 360w ,https://serhii.vasylenko.info/2020/05/02/2020-05-02-terraform-explained-for-managers_hubbb6b9f8f45abb2018c0e6ed8710b45c_73745_480x0_resize_box_3.png 480w ,https://serhii.vasylenko.info/2020/05/02/2020-05-02-terraform-explained-for-managers_hubbb6b9f8f45abb2018c0e6ed8710b45c_73745_720x0_resize_box_3.png 720w ,https://serhii.vasylenko.info/2020/05/02/2020-05-02-terraform-explained-for-managers.png 839w" sizes="(min-width: 768px) 720px, 100vw" src=https://serhii.vasylenko.info/2020/05/02/2020-05-02-terraform-explained-for-managers.png alt width=839 height=379>
</figure><div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#this-article-was-written-a-long-time-ago-in-a-galaxy-far-far-away aria-label="This article was written a long time ago in a galaxy far, far away&amp;hellip;">This article was written a long time ago in a galaxy far, far away&mldr;</a><ul>
<li>
<a href=#a-few-words-about-infrastructure-as-code aria-label="A few words about “Infrastructure as Code”">A few words about “Infrastructure as Code”</a></li>
<li>
<a href=#why-and-when-do-you-need-the-terraform-for-a-project aria-label="Why and when do you need the Terraform for a project?">Why and when do you need the Terraform for a project?</a></li>
<li>
<a href=#how-does-it-work aria-label="How does it work?">How does it work?</a></li>
<li>
<a href=#what-is-inside aria-label="What is inside?">What is inside?</a></li>
<li>
<a href=#and-this-is-it aria-label="And this is it?">And this is it?</a></li>
<li>
<a href=#okay-what-next aria-label="Okay, what next?">Okay, what next?</a>
</li>
</ul>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h2 id=this-article-was-written-a-long-time-ago-in-a-galaxy-far-far-away>This article was written a long time ago in a galaxy far, far away&mldr;<a hidden class=anchor aria-hidden=true href=#this-article-was-written-a-long-time-ago-in-a-galaxy-far-far-away>#</a></h2>
<p>As a team leader, I have to speak with my teammates on the same language — technical language&mldr;</p>
<p>For example, I have a good technical background, yet sometimes I have a feeling that my teammates see that I don’t understand them when we discuss some project or a task in-depth. Moreover, I know they are right. Of course, there are plenty of managers who do not have a technical background and they perform great. And some might say that technical skills are not the priority for a manager.</p>
<p>But I think that +1 to skills is always better than +0. Of course, it is a question of time and personal interests, one way or another.</p>
<p>This is why I decided to share my experience and explain Terraform in one blog post.</p>
<p>The language of this article will be ‘techie’ but not too much. This is because I want to highlight the main parts the Terraform consists of. Although, this is not technical documentation (I hope). Code examples will be based on AWS cloud configuration, although in-depth knowledge of AWS is not required to understand them.</p>
<h3 id=a-few-words-about-infrastructure-as-code>A few words about “Infrastructure as Code”<a hidden class=anchor aria-hidden=true href=#a-few-words-about-infrastructure-as-code>#</a></h3>
<p>IaC is when you describe and manage your infrastructure as… (guess what?) …code. Literally.</p>
<p>In a nutshell that means you can define all the elements (servers, networks, storage, etc.) and resources (memory, cpu, etc) of your infrastructure via configuration files in the version control system (Git, SVN, etc.), and manage it in a way similar to how you manage the source code of the applications: branches, releases, and all that stuff.</p>
<p>And the main idea behind the IaC approach is that it manages the state of things and must be the single source of truth (configuration truth) for your infrastructure. You define the state via the code (at first) and then IaC tool (Terraform, for example) applies this state on the infrastructure: all that is missing according to the code will be created, all that differs from the code will be changed and all that exists in the infrastructure but is not described via code — will be destroyed.</p>
<h3 id=why-and-when-do-you-need-the-terraform-for-a-project>Why and when do you need the Terraform for a project?<a hidden class=anchor aria-hidden=true href=#why-and-when-do-you-need-the-terraform-for-a-project>#</a></h3>
<p>Terraform is a specific tool, hence like any other tool it has its particular application area. There is no strict definition of project kind that needs Terraform (surprise!) but in general, you need to consider using Terraform if you answer ‘yes’ to one of the following questions:</p>
<ul>
<li>Do you have multiple logical elements of the same kind (in plural) in your infrastructure, i.e. several web servers, several application servers, several database servers?</li>
<li>Do you have numerous environments (or workspaces) where you run your applications, i.e. development, staging, QA, production?</li>
<li>Do you spend some significant amount of time managing the changes in the environment(s) where you run your applications?</li>
</ul>
<h3 id=how-does-it-work>How does it work?<a hidden class=anchor aria-hidden=true href=#how-does-it-work>#</a></h3>
<p>Terraform works with the source code of configuration, and interprets the code into real resources inside on-premise or cloud platforms.</p>
<p>Terraform supports a lot of platforms: from major cloud providers such as AWS, Azure, GCP, DigitalOcean, to more modest platforms such as OVH, 1&1, Hetzner, and others. It also supports infrastructure software such as Docker, Kubernetes, Chef, and even databases and monitoring software. This is why Terraform is so popular — it is a real Swiss knife in the operations world.</p>
<p>So to create, change, or destroy the infrastructure Terraform needs the source code. The <strong>source code</strong> is a set of configuration files that defines your infrastructure state. The code uses its own syntax but it looks very user friendly. Here is an example: the following configuration block describes the virtual server (EC2 instance) in AWS</p>
<div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#686868">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">4
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>resource &#34;aws_instance&#34; “web_server” {<span style=color:#666>
</span><span style=color:#666>  </span>ami           = &#34;ami-a1b2c3d4&#34;<span style=color:#666>
</span><span style=color:#666>  </span>instance_type = &#34;t3.micro&#34;<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span></code></pre></td></tr></table>
</div>
</div><p>Terraform can automatically detect the dependencies between resources described in the code, and also allows you to add custom dependencies when needed.</p>
<p>When you apply the code first time, Terraform creates a so-called “<strong>state file</strong>” that works as a mapping of your code to real resources created in the hosting platform. With each next “apply” action Terraform will use it to compare the code changes with the sate file to decide what should be done (and in what order) against real infrastructure.</p>
<p>One of the important functions of the state file is a description of dependencies between the resources. For example (some technical nuances are omitted for purpose of simplicity): if you have a server created inside some network and that network is going to be changed, then Terraform will know that server setting should be changed as well or server should be re-created inside the updated network.</p>
<h3 id=what-is-inside>What is inside?<a hidden class=anchor aria-hidden=true href=#what-is-inside>#</a></h3>
<p>Terraform configuration code consists of several elements: providers, resources, modules, input variables, output values, local values, expressions, functions.</p>
<p><strong>Provider</strong> is an entity that defines what exactly is possible to do with cloud or on-premises infrastructure platform you manage via Terraform.</p>
<p><strong>Resource</strong> is the most important part of the configuration code. This is where the definition of infrastructure objects happens. Resources are the main building blocks of the whole code.</p>
<p>Every resource has a type and local name. For example here is how EC2 instance configuration may look like:</p>
<div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#686868">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">4
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>resource “aws_instance” “web_server” {<span style=color:#666>
</span><span style=color:#666>  </span>ami           = “ami-a1b2c3d4”<span style=color:#666>
</span><span style=color:#666>  </span>instance_type = “t3.micro”<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span></code></pre></td></tr></table>
</div>
</div><p>The <code>aws_instance</code> is a resource type and <code>web_server</code> is the resource local name. Later, when Terraform applies this code, it will create an EC2 instance with some particular ID in AWS. Once created, the ID will be stored in the state file with mapping information that logically connects it with <code>web_server</code>.</p>
<p>The <code>ami</code>, <code>instance_type</code> and <code>private_ip</code> are the arguments with values which define the actual state of the resource. There are plenty of value types, depending on the particular argument and particular resource type, so I will not focus on them here.</p>
<p><strong>Modules</strong> are the kind of logical containers or groups for resources you define and use together. The purpose of modules is not only the grouping of resources but it is also the possibility to reuse the same code with different variables.</p>
<p>Let’s get back to the example with EC2 instance and say you need to have a static public IP address with it. In such a case, here is how the module for web server may look like:</p>
<div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#686868">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">7
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>resource “aws_instance” “web_server” {<span style=color:#666>
</span><span style=color:#666>  </span>ami           = “ami-a1b2c3d4”<span style=color:#666>
</span><span style=color:#666>  </span>instance_type = “t3.micro”<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span><span style=color:#666></span>resource “aws_eip” “web_server_public_ip” {<span style=color:#666>
</span><span style=color:#666>  </span>instance      = “${aws_instance.web_server.id}”<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span></code></pre></td></tr></table>
</div>
</div><p>Having these two resources together allows us to think of it as a stand-alone unit you can reuse later, for example in our development, staging, and production environments. And not by copying and pasting it, but via reference to the module defined only once.</p>
<p>Please note: we specified an instance argument inside the <code>aws_eip</code> resource as a reference to another resource details (the ID of an instance). This is possible because of a way how Terraform treats dependencies: when it detects the dependency (or you define it explicitly) it will create the main resource first, and only after it’s created and available it will create the dependent one.</p>
<p><strong>Input variables</strong> work as parameters for the modules so module code could be reusable. Let’s look at the previous example: it has some hardcoded values — instance image ID and instance type. Here is how you can make it more abstract and reusable:</p>
<div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">10
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>variable “image_id” {<span style=color:#666>
</span><span style=color:#666>  </span>type          = string<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span><span style=color:#666></span>variable “instance_type” {<span style=color:#666>
</span><span style=color:#666>  </span>type          = string<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span><span style=color:#666></span>resource “aws_instance” “web_server” {<span style=color:#666>
</span><span style=color:#666>  </span>ami           = var.image_id<span style=color:#666>
</span><span style=color:#666>  </span>instance_type = var.instance_type<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span></code></pre></td></tr></table>
</div>
</div><p>Values for the variables then can be passed either via CLI and environment variables (if you have only the one, so-called root module) or via explicit values in the block where you call a module, for example:</p>
<div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">10
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>module “web_server_production” {<span style=color:#666>
</span><span style=color:#666>  </span>source.       = “./modules/web_server”<span style=color:#666>
</span><span style=color:#666>  </span>image_id      = “ami-a1b2c3d4”<span style=color:#666>
</span><span style=color:#666>  </span>instance_type = “m5.large”<span style=color:#666>
</span><span style=color:#666>  </span>}<span style=color:#666>
</span><span style=color:#666></span>module “web_server_development” {<span style=color:#666>
</span><span style=color:#666>  </span>source        = “./modules/web_server”<span style=color:#666>
</span><span style=color:#666>  </span>image_id      = “ami-a2b3c4d5”<span style=color:#666>
</span><span style=color:#666>  </span>instance_type = “t3.micro”<span style=color:#666>
</span><span style=color:#666> </span>}<span style=color:#666>
</span></code></pre></td></tr></table>
</div>
</div><p><strong>Output values</strong> are similar to the “return” of a function in development language. They can be used for dependencies management (for example, when a module require something from another module) and for the printing of the certain values at the end of Terraform work (for example to be used for notification in CI/CD process).</p>
<p><strong>Local values</strong>, <strong>expressions</strong>, <strong>functions</strong> — three more things that augment the capabilities of Terraform and make it more similar to a programming language (which is great by the way).</p>
<p>The local values are used inside modules for extended data manipulations in it.</p>
<p>The expressions are used to set the values (for many things), for example, to set the value of some argument in resource configuration. They used either to refer something (just as we referenced instance ID <code>“${aws_instance.web_server.id}”</code> in the example above) or to compute the value within your configuration.</p>
<p>The functions in Terraform are built-int jobs you can call to transform and combine values. For example, the <code>tolist()</code> function converts its argument to a list value.</p>
<h3 id=and-this-is-it>And this is it?<a hidden class=anchor aria-hidden=true href=#and-this-is-it>#</a></h3>
<p>Yes, in a very very short words — this is what Terraform is. Not a rocket science if it&rsquo;s about to manage a small infastructure, but gets more complicated with bigger infrastctucture. As any other engineerign tool or development language, actually.</p>
<h3 id=okay-what-next>Okay, what next?<a hidden class=anchor aria-hidden=true href=#okay-what-next>#</a></h3>
<p>If you read down to this point (anybody?) then it means it worth “get your hands dirty” and to try building your Infrastructure with Terraform. There are plenty of courses and books (and the “Terraform up and running” is one of the most popular), but my learning path started from the following: <a href=https://learn.hashicorp.com/terraform>Official guide from Hashicorp</a> — great and free guide from Terraform developers. Just pick your favorite cloud (AWS, Azure, GCP) and go through the topics.</p>
<p>Once you finish this guide, I suggest jumping into the more real-world things and describe the infrastructure of the most common project you work with. For example, here is what I do: <a href=https://github.com/vasylenko/tf-ecs>small github project</a> – I am trying to describe the Infrastructure for SPA website with services in docker containers at the backend. The variety and complexity of the code are limited only by your fantasy.</p>
<p>Another thing worth your attention is <a href=https://blog.gruntwork.io/a-comprehensive-guide-to-terraform-b3d32832baca>A Comprehensive Guide to Terraform</a>.</p>
<p>And I also encourage you to go through the <a href=https://gruntwork.io/static/devops-resources/>collection of blog posts and talks</a> they share.</p>
</div>
<footer class=post-footer>
<p>If you liked the article, please <b>support me by sharing</b> it on social networks 🙏</p>
<p>Also feel free to <a href=mailto:email-from-blog@vasylenko.info style=text-transform:lowercase;text-decoration:underline rel="noopener noreferrer" target=_blank>📩 Suggest Changes</a> by emailing me or leave your comment below!</p>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Terraform explained for managers on twitter" href="https://twitter.com/intent/tweet/?text=Terraform%20explained%20for%20managers&url=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f05%2f02%2fTerraform-explained-for-managers.html&hashtags=terraform%2ctutorials"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Terraform explained for managers on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f05%2f02%2fTerraform-explained-for-managers.html&title=Terraform%20explained%20for%20managers&summary=Terraform%20explained%20for%20managers&source=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f05%2f02%2fTerraform-explained-for-managers.html"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Terraform explained for managers on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f05%2f02%2fTerraform-explained-for-managers.html&title=Terraform%20explained%20for%20managers"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Terraform explained for managers on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fserhii.vasylenko.info%2f2020%2f05%2f02%2fTerraform-explained-for-managers.html"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
</div>
<ul class=post-tags>
<li><a href=https://serhii.vasylenko.info/tags/terraform/>terraform</a></li>
<li><a href=https://serhii.vasylenko.info/tags/tutorials/>tutorials</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://serhii.vasylenko.info/2020/08/06/ansible-secrets-aws-ssm-sm.html>
<span class=title>« Prev Page</span>
<br>
<span>Manage Ansible playbook secrets with AWS services</span>
</a>
<a class=next href=https://serhii.vasylenko.info/2020/03/20/devops-team-in-outsource-a-team.html>
<span class=title>Next Page »</span>
<br>
<span>DevOps team in outsource. A team?</span>
</a>
</nav>
</footer><div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//serhii-vasylenko-info.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://serhii.vasylenko.info>Serhii Vasylenko</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>